// Generated by CoffeeScript 1.6.3
(function() {
  'use strict';
  var appConfig, servicesConfig;

  appConfig = [
    '$routeProvider', '$locationProvider', '$httpProvider', '$modalProvider', function($routeProvider, $locationProvider, $httpProvider, $modalProvider) {
      $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
      $locationProvider.html5Mode(true);
      $routeProvider.when('/', {
        templateUrl: 'pages/landing.html'
      }).when('/admin/authentications', {
        controller: 'RootCtrl'
      }).when('/landing', {
        templateUrl: 'pages/landing.html'
      }).when('/proposals', {
        templateUrl: 'proposals/index.html',
        controller: 'ProposalListCtrl'
      }).when('/proposals/:proposalId', {
        templateUrl: 'proposals/show.html',
        controller: 'ProposalShowCtrl',
        resolve: {
          proposal: [
            'ProposalLoader', function(ProposalLoader) {
              return ProposalLoader();
            }
          ],
          relatedProposals: [
            'RelatedProposalsLoader', function(RelatedProposalsLoader) {
              return RelatedProposalsLoader();
            }
          ]
        }
      }).when('/currentuser', {
        resolve: {
          currentuser: [
            'CurrentUserLoader', function(CurrentUserLoader) {
              return CurrentUserLoader();
            }
          ]
        }
      }).when('/user-forum', {
        templateUrl: 'pages/user-forum.html'
      }).when('/dev-forum', {
        templateUrl: 'pages/dev-forum.html'
      }).when('/terms-of-use', {
        templateUrl: 'pages/terms-of-use.html'
      }).when('/privacy', {
        templateUrl: 'pages/privacy.html'
      }).otherwise({
        template: '<h3>Whoops, page not found</h3>'
      });
      $modalProvider.options = {
        backdrop: true,
        keyboard: true,
        windowClass: ''
      };
      return jQuery(function() {
        $('body').prepend('<div id="fb-root"></div>');
        return $.ajax({
          url: "" + window.location.protocol + "//connect.facebook.net/en_US/all.js",
          dataType: 'script',
          cache: true
        });
      });
    }
  ];

  window.App = angular.module('spokenvote', ['ngRoute', 'angular-loading-bar', 'ngAnimate', 'spokenvote.services', 'spokenvote.directives', 'templates', 'ui', 'ui.bootstrap']).config(appConfig);

  servicesConfig = [
    '$httpProvider', function($httpProvider) {
      return $httpProvider.responseInterceptors.push('errorHttpInterceptor');
    }
  ];

  App.Services = angular.module('spokenvote.services', ['ngResource', 'ngCookies']).config(servicesConfig).run([
    '$rootScope', '$location', function($rootScope, $location) {
      return $rootScope.location = $location;
    }
  ]);

  App.Directives = angular.module('spokenvote.directives', []);

  window.getSrv = function(name, element) {
    element = element || "*[ng-app]";
    return angular.element(element).injector().get(name);
  };

  window.getScope = function(element) {
    return angular.element(element).scope();
  };

}).call(this);
